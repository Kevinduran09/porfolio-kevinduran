---
// src/pages/projects/index.astro
import BentoCard from "@/components/BentoCard.astro";
import { getProjects } from "@/data/projects";
import ProjectsIcon from "@/components/icons/ProjectsIcon.astro";
import SectionLayout from "@/layouts/SectionLayout.astro";

const projects = getProjects();
---

<SectionLayout id="projects" class="lg:py-0">
  <!-- Título -->
  <h2
    class="w-full justify-center flex items-center gap-x-3 text-4xl font-semibold text-center my-6 md:my-12 text-white"
    data-aos="fade-down"
    data-aos-duration="800"
    data-aos-once="true"
  >
    <ProjectsIcon />
    Proyectos
  </h2>

  <div
    class="flex flex-col gap-2 sm:grid sm:grid-cols-2 md:grid-cols-4 sm:grid-rows-3 sm:auto-rows-[160px] md:auto-rows-[200px]"
  >
    <!-- Card de Bienvenida -->
    <div
      class="sm:col-span-2 sm:row-span-2 flex flex-col justify-center items-center bg-gradient-to-br from-fuchsia-700/80 to-fuchsia-400/80 rounded-xl shadow-xl p-4 sm:p-8 text-white"
      data-aos="zoom-in"
      data-aos-duration="1000"
      data-aos-delay="200"
      data-aos-once="true"
    >
      <h3 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-2 text-center">
        ¡Bienvenido!
      </h3>
      <p class="text-base sm:text-lg md:text-xl text-center">
        Explora mis mejores proyectos destacados y conoce más sobre mi trabajo.
      </p>
    </div>

    <!-- Proyectos con animación escalonada -->
    {
      projects.slice(0, 5).map((project, idx) => (
        <div
          class={`bento-card ${
            idx === 0
              ? "col-span-1 sm:col-span-2 row-span-1"
              : idx === 3 || idx === 4
                ? "col-span-1 sm:col-span-2 row-span-1"
                : "col-span-1 row-span-1"
          }`}
          data-aos="zoom-in"
          data-aos-duration="900"
          data-aos-delay={200 + idx * 200}
          data-aos-once="true"
          style={`--aos-delay: ${200 + idx * 200}ms`}
        >
          <BentoCard
            project={{
              id: project.id,
              title: project.title,
              description: project.description,
              shortDescription: project.description.slice(0, 80) + "...",
              imageUrl: project.images[0],
            }}
          />
        </div>
      ))
    }
  </div>
</SectionLayout>

<style>
  .bento-card {
    opacity: 0;
    transform: scale(0.75);
    will-change: transform, opacity;
  }

  .bento-card.aos-animate {
    animation: bounce-motion 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-delay: var(--aos-delay, 0ms);
  }

  .bento-card:hover {
    transform: translateY(-4px) scale(1.02);
  }

  /* Optimización */
  .bento-card > :global(*) {
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
  }

  @keyframes bounce-motion {
    0% {
      opacity: 0;
      transform: scale(0.75);
    }
    42% {
      opacity: 1;
      transform: scale(1.05);
    }
    75% {
      transform: scale(0.94);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }
</style>
